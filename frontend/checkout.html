<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Book Store</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#8b5cf6',
                            foreground: '#ffffff'
                        },
                        secondary: {
                            DEFAULT: '#f3f4f6',
                            foreground: '#374151'
                        },
                        background: '#faf5ff',
                        foreground: '#1f2937',
                        muted: {
                            DEFAULT: '#f9fafb',
                            foreground: '#6b7280'
                        },
                        border: '#e5e7eb'
                    }
                }
            }
        }
    </script>
    
    <style>
        .step-active {
            background-color: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }
        
        .step-inactive {
            border-color: #e5e7eb;
            color: #6b7280;
        }
        
        .progress-line-active {
            background-color: #8b5cf6;
        }
        
        .progress-line-inactive {
            background-color: #e5e7eb;
        }
        
        .radio-checked {
            background-color: #8b5cf6;
            border-color: #8b5cf6;
        }
        
        .coupon-applied {
            background-color: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
    </style>
</head>
<body class="min-h-screen" style="background-color: #faf5ff;">
    <div class="max-w-4xl mx-auto p-6">
        <!-- Progress Steps -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
            <div class="p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="flex items-center">
                            <div id="step-1" class="flex items-center justify-center w-10 h-10 rounded-full border-2 step-active">
                                <i data-lucide="shopping-cart" class="w-5 h-5"></i>
                            </div>
                            <span id="step-1-text" class="ml-3 font-medium text-gray-900">Cart</span>
                        </div>
                        <div id="progress-1" class="w-16 h-0.5 mx-4 progress-line-inactive"></div>
                    </div>
                    
                    <div class="flex items-center">
                        <div class="flex items-center">
                            <div id="step-2" class="flex items-center justify-center w-10 h-10 rounded-full border-2 step-inactive">
                                <i data-lucide="truck" class="w-5 h-5"></i>
                            </div>
                            <span id="step-2-text" class="ml-3 font-medium text-gray-500">Delivery</span>
                        </div>
                        <div id="progress-2" class="w-16 h-0.5 mx-4 progress-line-inactive"></div>
                    </div>
                    
                    <div class="flex items-center">
                        <div id="step-3" class="flex items-center justify-center w-10 h-10 rounded-full border-2 step-inactive">
                            <i data-lucide="credit-card" class="w-5 h-5"></i>
                        </div>
                        <span id="step-3-text" class="ml-3 font-medium text-gray-500">Checkout</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 1: Cart -->
        <div id="cart-step" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-900">Your Cart</h2>
                    </div>
                    <div class="p-6 space-y-6">
                        <!-- Book Item -->
                        <div class="flex items-start gap-4 p-4 border border-gray-200 rounded-lg">
                            <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=100&h=120&fit=crop&crop=center" 
                                 alt="Kerry's Fun in the Sun" class="w-16 h-20 object-cover rounded">
                            <div class="flex-1">
                                <h3 class="font-semibold text-lg text-gray-900">Kerry's Fun in the Sun</h3>
                                <p class="text-gray-500 text-sm">Hardcover | English</p>
                                <div class="mt-2">
                                    <span class="text-lg font-bold text-gray-900">€39.99</span>
                                </div>
                            </div>
                            <button class="p-1 hover:bg-gray-100 rounded">
                                <i data-lucide="x" class="w-4 h-4 text-gray-500"></i>
                            </button>
                        </div>

                        <!-- Add More Books -->
                        <div class="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
                            <p class="text-gray-500 mb-4">Add Another Personalised Book?</p>
                            <button class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 font-medium">
                                Add Books
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Summary -->
            <div>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Order Summary</h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="flex justify-between">
                            <span class="text-gray-700">Books (1)</span>
                            <div class="text-right">
                                <span class="line-through text-gray-400 text-sm">€50.00</span>
                                <span class="ml-2 font-semibold text-gray-900">€39.99</span>
                            </div>
                        </div>

                        <hr class="border-gray-200">

                        <!-- Coupon Section -->
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">Got a Coupon Code?</label>
                            <div id="coupon-input" class="flex gap-2">
                                <input type="text" id="coupon-code" placeholder="CODE" 
                                       class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <button id="apply-coupon" class="text-purple-600 hover:text-purple-700 font-medium px-3">
                                    Apply
                                </button>
                            </div>
                            <div id="applied-coupon" class="hidden coupon-applied p-3 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm font-medium text-gray-700">SAVE10 applied</span>
                                    <button id="remove-coupon" class="text-gray-500 hover:text-gray-700">
                                        <i data-lucide="x" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <hr class="border-gray-200">

                        <div class="flex justify-between text-lg font-bold" style="color: #8b5cf6;">
                            <span>Total</span>
                            <span id="cart-total">€39.99</span>
                        </div>

                        <button id="continue-to-delivery" class="w-full py-3 px-4 text-white font-semibold rounded-md" 
                                style="background-color: #8b5cf6;" onmouseover="this.style.backgroundColor='#7c3aed'" 
                                onmouseout="this.style.backgroundColor='#8b5cf6'">
                            Continue
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: Delivery -->
        <div id="delivery-step" class="hidden grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-900">Shipping Details</h2>
                    </div>
                    <div class="p-6 space-y-6">
                        <!-- Email -->
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" id="email" value="euitsols.access@gmail.com" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <p class="text-sm text-gray-500 mt-1">
                                This email will be used to keep you informed about your order status and details.
                            </p>
                        </div>

                        <!-- Country -->
                        <div>
                            <label for="country" class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                            <select id="country" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="Ireland" selected>Ireland</option>
                                <option value="UK">United Kingdom</option>
                                <option value="US">United States</option>
                            </select>
                        </div>

                        <!-- Name Fields -->
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                                <input type="text" id="firstName" value="Sandeep" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                                <input type="text" id="lastName" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>

                        <!-- Phone -->
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                            <input type="tel" id="phone" value="0123456789" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>

                        <!-- Address with Map -->
                        <div>
                            <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                            <div class="space-y-3">
                                <input type="text" id="address" value="Test street" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <!-- Mock Google Map -->
                                <div id="map-placeholder" class="h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors">
                                    <div class="text-center">
                                        <i data-lucide="map-pin" class="w-8 h-8 mx-auto mb-2 text-gray-400"></i>
                                        <p class="text-sm text-gray-500">Click to select location on map</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Postal Code and City -->
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="postalCode" class="block text-sm font-medium text-gray-700 mb-1">Postal Code</label>
                                <input type="text" id="postalCode" value="00000" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City</label>
                                <input type="text" id="city" value="Test city" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shipping Method -->
            <div>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Shipping Method</h3>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <div class="shipping-option p-4 border border-gray-200 rounded-lg cursor-pointer" data-method="standard" data-price="9.00">
                                <div class="flex items-center space-x-3">
                                    <input type="radio" name="shipping" value="standard" checked class="w-4 h-4 text-purple-600">
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between">
                                            <label class="font-semibold text-gray-900 cursor-pointer">Standard</label>
                                            <span class="font-bold text-gray-900">€9.00</span>
                                        </div>
                                        <p class="text-sm text-gray-500 flex items-center gap-1">
                                            <i data-lucide="clock" class="w-3 h-3"></i>
                                            10-17 Business Days
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="shipping-option p-4 border border-gray-200 rounded-lg cursor-pointer" data-method="express" data-price="23.00">
                                <div class="flex items-center space-x-3">
                                    <input type="radio" name="shipping" value="express" class="w-4 h-4 text-purple-600">
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between">
                                            <label class="font-semibold text-gray-900 cursor-pointer">Express</label>
                                            <span class="font-bold text-gray-900">€23.00</span>
                                        </div>
                                        <p class="text-sm text-gray-500 flex items-center gap-1">
                                            <i data-lucide="clock" class="w-3 h-3"></i>
                                            3-10 Business Days
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button id="continue-to-checkout" class="w-full mt-6 py-3 px-4 text-white font-semibold rounded-md" 
                                style="background-color: #8b5cf6;" onmouseover="this.style.backgroundColor='#7c3aed'" 
                                onmouseout="this.style.backgroundColor='#8b5cf6'">
                            Continue
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: Checkout -->
        <div id="checkout-step" class="hidden grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-900">Checkout</h2>
                    </div>
                    <div class="p-6 space-y-6">
                        <!-- Book Details -->
                        <div>
                            <h3 class="font-semibold mb-3 text-gray-900">Order Details</h3>
                            <div class="flex items-start gap-4 p-4 border border-gray-200 rounded-lg">
                                <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=100&h=120&fit=crop&crop=center" 
                                     alt="Kerry's Fun in the Sun" class="w-16 h-20 object-cover rounded">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900">Kerry's Fun in the Sun</h4>
                                    <p class="text-gray-500 text-sm">Hardcover | English</p>
                                    <div class="mt-2">
                                        <span class="text-lg font-bold text-gray-900">€39.99</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Shipping Information -->
                        <div>
                            <h3 class="font-semibold mb-3 text-gray-900">Shipping Information</h3>
                            <div class="p-4 border border-gray-200 rounded-lg space-y-2">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="package" class="w-4 h-4 text-gray-500"></i>
                                    <span class="font-medium text-gray-900" id="checkout-name">Sandeep</span>
                                </div>
                                <div class="text-sm text-gray-500" id="checkout-phone">0123456789</div>
                                <div class="text-sm text-gray-500" id="checkout-address">Test street, 00000 Test city</div>
                                <div class="text-sm text-gray-500" id="checkout-country">Ireland</div>
                                <div class="flex items-center gap-2 pt-2">
                                    <i data-lucide="truck" class="w-4 h-4 text-gray-500"></i>
                                    <span class="text-sm" id="checkout-shipping">Standard Shipping</span>
                                    <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full" id="checkout-delivery-time">10-17 Business Days</span>
                                </div>
                            </div>
                        </div>

                        <!-- Team Message -->
                        <div class="p-4 rounded-lg border" style="background-color: rgba(139, 92, 246, 0.1); border-color: rgba(139, 92, 246, 0.2);">
                            <div class="flex items-start gap-3">
                                <i data-lucide="shield" class="w-5 h-5 mt-0.5" style="color: #8b5cf6;"></i>
                                <div>
                                    <h4 class="font-semibold text-sm text-gray-900">Message from our team</h4>
                                    <p class="text-sm text-gray-600 mt-1">
                                        Thank you for choosing our bookstore! Your order will be carefully packaged and shipped with
                                        love. We're committed to bringing you the best reading experience.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final Order Summary -->
            <div>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Order Summary</h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="flex justify-between">
                            <span class="text-gray-700">Books (1)</span>
                            <div class="text-right">
                                <span class="line-through text-gray-400 text-sm">€50.00</span>
                                <span class="ml-2 font-semibold text-gray-900">€39.99</span>
                            </div>
                        </div>

                        <div class="flex justify-between">
                            <span class="text-gray-700" id="final-shipping-name">Standard Shipping</span>
                            <span class="text-gray-900" id="final-shipping-cost">€9.00</span>
                        </div>

                        <hr class="border-gray-200">

                        <!-- Final Coupon Section -->
                        <div id="final-coupon-section" class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">Got a Coupon Code?</label>
                            <div class="flex gap-2">
                                <input type="text" id="final-coupon-code" placeholder="CODE" 
                                       class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <button id="apply-final-coupon" class="text-purple-600 hover:text-purple-700 font-medium px-3">
                                    Apply
                                </button>
                            </div>
                        </div>
                        
                        <div id="final-coupon-discount" class="hidden flex justify-between">
                            <span class="text-gray-700">Coupon Discount</span>
                            <span class="text-green-600">-€10.00</span>
                        </div>

                        <hr class="border-gray-200">

                        <div class="flex justify-between text-lg font-bold" style="color: #8b5cf6;">
                            <span>Total</span>
                            <span id="final-total">€48.99</span>
                        </div>

                        <p class="text-xs text-gray-500">
                            Customs duties, or import fees may be applied upon delivery.
                        </p>

                        <!-- Payment Buttons -->
                        <div class="space-y-3 pt-4">
                            <button class="w-full py-3 px-4 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-md">
                                PayPal
                            </button>
                            <button id="pay-button" class="w-full py-3 px-4 text-white font-semibold rounded-md" 
                                    style="background-color: #8b5cf6;" onmouseover="this.style.backgroundColor='#7c3aed'" 
                                    onmouseout="this.style.backgroundColor='#8b5cf6'">
                                Pay €48.99
                            </button>
                        </div>

                        <!-- Security Badge -->
                        <div class="flex items-center justify-center gap-2 pt-4 text-xs text-gray-500">
                            <i data-lucide="shield" class="w-4 h-4"></i>
                            <span>Secure SSL encrypted payment</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Back Button -->
        <div id="back-button-container" class="hidden mt-8">
            <button id="back-button" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 font-medium">
                Back
            </button>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Global state
        let currentStep = 1;
        let appliedCoupon = null;
        let selectedShipping = 'standard';
        let shippingCost = 9.00;
        
        // Initialize the page
        $(document).ready(function() {
            updateStepDisplay();
            
            // Cart step event handlers
            $('#apply-coupon').click(function() {
                const code = $('#coupon-code').val().toLowerCase();
                if (code === 'save10') {
                    appliedCoupon = 'SAVE10';
                    $('#coupon-input').hide();
                    $('#applied-coupon').show();
                    updateCartTotal();
                }
            });
            
            $('#remove-coupon').click(function() {
                appliedCoupon = null;
                $('#coupon-input').show();
                $('#applied-coupon').hide();
                $('#coupon-code').val('');
                updateCartTotal();
            });
            
            $('#continue-to-delivery').click(function() {
                currentStep = 2;
                updateStepDisplay();
            });
            
            // Delivery step event handlers
            $('.shipping-option').click(function() {
                selectedShipping = $(this).data('method');
                shippingCost = parseFloat($(this).data('price'));
                $('.shipping-option input[type="radio"]').prop('checked', false);
                $(this).find('input[type="radio"]').prop('checked', true);
            });
            
            $('#map-placeholder').click(function() {
                $('#address').val('Test street');
                $('#city').val('Galway');
                $('#postalCode').val('00000');
                alert('Location selected from map!');
            });
            
            $('#continue-to-checkout').click(function() {
                currentStep = 3;
                updateCheckoutInfo();
                updateStepDisplay();
            });
            
            // Checkout step event handlers
            $('#apply-final-coupon').click(function() {
                const code = $('#final-coupon-code').val().toLowerCase();
                if (code === 'save10') {
                    appliedCoupon = 'SAVE10';
                    $('#final-coupon-section').hide();
                    $('#final-coupon-discount').show();
                    updateFinalTotal();
                }
            });
            
            $('#pay-button').click(function() {
                alert('Payment processed successfully! Thank you for your order.');
            });
            
            // Back button
            $('#back-button').click(function() {
                if (currentStep > 1) {
                    currentStep--;
                    updateStepDisplay();
                }
            });
        });
        
        function updateStepDisplay() {
            // Hide all steps
            $('#cart-step, #delivery-step, #checkout-step').hide();
            
            // Show current step
            if (currentStep === 1) {
                $('#cart-step').show();
                $('#back-button-container').hide();
            } else if (currentStep === 2) {
                $('#delivery-step').show();
                $('#back-button-container').show();
            } else if (currentStep === 3) {
                $('#checkout-step').show();
                $('#back-button-container').show();
            }
            
            // Update step indicators
            for (let i = 1; i <= 3; i++) {
                const stepEl = $(`#step-${i}`);
                const textEl = $(`#step-${i}-text`);
                
                if (currentStep >= i) {
                    stepEl.removeClass('step-inactive').addClass('step-active');
                    textEl.removeClass('text-gray-500').addClass('text-gray-900');
                } else {
                    stepEl.removeClass('step-active').addClass('step-inactive');
                    textEl.removeClass('text-gray-900').addClass('text-gray-500');
                }
            }
            
            // Update progress lines
            for (let i = 1; i <= 2; i++) {
                const progressEl = $(`#progress-${i}`);
                if (currentStep > i) {
                    progressEl.removeClass('progress-line-inactive').addClass('progress-line-active');
                } else {
                    progressEl.removeClass('progress-line-active').addClass('progress-line-inactive');
                }
            }
        }
        
        function updateCartTotal() {
            const basePrice = 39.99;
            const discount = appliedCoupon ? 10.00 : 0;
            const total = basePrice - discount;
            $('#cart-total').text(`€${total.toFixed(2)}`);
        }
        
        function updateCheckoutInfo() {
            const firstName = $('#firstName').val();
            const lastName = $('#lastName').val();
            const phone = $('#phone').val();
            const address = $('#address').val();
            const postalCode = $('#postalCode').val();
            const city = $('#city').val();
            const country = $('#country').val();
            
            $('#checkout-name').text(`${firstName} ${lastName}`);
            $('#checkout-phone').text(phone);
            $('#checkout-address').text(`${address}, ${postalCode} ${city}`);
            $('#checkout-country').text(country);
            
            const shippingMethod = selectedShipping === 'standard' ? 'Standard' : 'Express';
            const deliveryTime = selectedShipping === 'standard' ? '10-17 Business Days' : '3-10 Business Days';
            
            $('#checkout-shipping').text(`${shippingMethod} Shipping`);
            $('#checkout-delivery-time').text(deliveryTime);
            $('#final-shipping-name').text(`${shippingMethod} Shipping`);
            $('#final-shipping-cost').text(`€${shippingCost.toFixed(2)}`);
            
            updateFinalTotal();
        }
        
        function updateFinalTotal() {
            const basePrice = 39.99;
            const discount = appliedCoupon ? 10.00 : 0;
            const total = basePrice + shippingCost - discount;
            $('#final-total').text(`€${total.toFixed(2)}`);
            $('#pay-button').text(`Pay €${total.toFixed(2)}`);
        }
    </script>
</body>
</html>
